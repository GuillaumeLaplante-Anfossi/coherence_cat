% !TEX root = ../Coherence.tex

\section{Koszul duality} 
\label{s:koszul}



Another standard method to prove that an operad is Koszul is the "operadic partition poset method" \cite[Section 8.7]{LodayVallette12}. Its extension to the colored setting is straightforward.

\begin{thm}[Koszul-Cohen-Macaulay criterion {\cite[Theorem 8.7.5]{LodayVallette12}}] \label{thm:koszulmacaulay} Let $\mathrm{O}$ be a quadratic basic-set $X$-colored operad generated by a homogeneous $\mathbb{S}$-set concentrated in arity $k$, with $k\geq 2$. Let $\Pi_{\mathrm{O}}(x_1,\ldots,x_n;x_0)$ denote the colored operadic partition posets.
\begin{itemize}
    \item The linear colored operad $\calO=\KK\mathrm{O}$ is a Koszul colored operad if and only if, for every $n\geq 1$ and every $\omega \in \mathrm{Max}(\Pi_{\mathrm{O}}(x_1,\ldots,x_n;x_0))$, the interval $[\hat 0,\omega]$ is Cohen-Macaulay. 
    \item The top homology groups are isomorphic to the Koszul dual cooperad \[H_{\mathrm{top}}(\Pi_{\mathrm{O}}(x_1,\ldots,x_n;x_0))\cong \calO^{\as}(x_1,\ldots,x_n;x_0) \]
\end{itemize}
\end{thm}

%We can apply this theorem to the operad $\calO_{ns}$ to obtain an alternative proof of \cref{thm:Koszulrewriting}.

\begin{proof}[{\cref{thm:Koszulrewriting}}, third proof] The operad $\calO_{ns}$ is a quadratic basic-set $\mathbb{N}$-colored operad generated by a homogeneous $\mathbb{S}$-set concentrated in arity 2. A colored operadic partition poset $\Pi_{\mathrm{OT}}(x_1,\ldots,x_n;x_0)$ is the poset of nestings of all the possible operadic trees obtained by grafting $n$ corollas with $x_1,\ldots,x_n$ leaves and respecting the planar canonical numbering. A maximal element $\omega$ in $\Pi_{\mathrm{OT}}(x_1,\ldots,x_n;x_0)$ is a particular operadic tree $\tau \in \mathrm{OT}$ with $n$ vertices, and an interval $[\hat 0,\omega]$ is the poset of nestings $\mathrm{N}_\tau$ of $\tau$. This poset is a lattice, thus it is also Cohen-Macaulay. 
\end{proof}

So we see that the posets $[\hat 0,\omega]$ have more structure than the Cohen-Macaulay property, which is a condition equivalent to Koszulity. They are lattices, moreover isomorphic to face lattices of polytopes. This suggests that the operad $\calO_{ns}$ has further algebraic properties. 



\begin{thm} \label{prop:koszulpoincare} Let $\mathrm{O}$ be a quadratic set $X$-colored operad which is also finite in each arity, and let $\calO=\KK \mathrm{O}$ be its algebraic avatar. We suppose that there exists a family $P=\{P_\tau\}_{\tau \in \mathrm{O}}$ of polytopes inedexed by the elements of $\mathrm{O}$, which is endowed with a topological colored operad structure and such that we have an isomorphism of de colored cooperads (resp. operads) \[C^{-\bullet}_{\mathrm{cell}}(P)\cong B\calO \quad (\text{resp.} \ C_{\bullet}^{\mathrm{cell}}(P)\cong \Omega\calO^{\as})\ . \] Then, we have that
    \begin{enumerate}
        \item the colored operad $\calO$ is Koszul, 
        \item the colored operad $\calO$ is self-dual for Koszul duality, 
        \item there is an isomorphism of colored operads (resp. cooperads)  $C_{\bullet}^{\mathrm{cell}}(P)\cong \Omega\calO^{\as} \ (\text{resp.} C^{-\bullet}_{\mathrm{cell}}(P)\cong B\calO)$, and
        \item there is an isomorphism of colored operads $\Omega B \calO \cong C_{\bullet}^{\mathrm{cell}}(P_\mathrm{sub})$\ .
    \end{enumerate} 
\end{thm}
Here, $P_\mathrm{sub}$ stands for the family of polytopes $\{P_\tau^{\mathrm{sub}}\}_{\tau \in \mathrm{O}}$ where each polytope $P_\tau$ is endowed with its dual subdivision.
\begin{proof} 

\leavevmode
    
\begin{enumerate}
    \item The fact that the polytopes are contractible imply that the cohomology (resp. homology) of the bar (resp. cobar) construction is concentrated in syzygy degree zero.
    \item As $\calO$ comes from a set-theoretic colored operad, we have the following isomorphisms of dg colored cooperad 
    \begin{eqnarray*} 
        \calO^{\as}\cong H^{[\bullet]}(B\calO)
        = \bigoplus_{\tau \in \mathrm{O}} H^{[\dim P_\tau-\bullet]}\left(C^{\dim P_\tau -\bullet}_{\mathrm{cell}}(P_\tau)\right)\cong \bigoplus_{\tau \in \mathrm{O}} \KK \cong \calO^{*} \ . 
    \end{eqnarray*} 
    The symmetric statement is obtained by dualization.
    \item The preceding two points now imply the following chain of isomorphims of dg colored operads 
    \[\Omega \mathcal{O}^{\as} \cong (B(\mathcal{O}^{\as})^{*})^{*} \cong (B\mathcal{O}^{!})^{*}\cong (B\mathcal{O})^{*}\cong C_{\mathrm{cell}}^{-\bullet}(P)^{*} \cong C_\bullet^{\mathrm{cell}}(P)  \ . \] 
    \item \Guillaume{TBC}
\end{enumerate}
\end{proof}

\Guillaume{
\begin{itemize}
    \item Remonter au poset des compositions? (--> Giraudo)
    \item Rel\^acher les hypoth\`eses permet-t-il d'appliquer le r\'esultat de Jovana?
    \item Qu'arrive-t-il si on ne demande pas des polytopes mais seulement des CWCX?
\end{itemize}}




On a aussi gratuitement l'analogue de la proposition 9.3.2 du Loday-Vallette. 

%l'orientation compte
%structure d'op√©rade sur les polytopes abstraits


\begin{thm} \label{thm:OnsKoszul} The colored operad $\calO_{ns}$ is Koszul and self-dual. Moreover, the cellular chains [...].
\end{thm}
\begin{proof} \Guillaume{TBC}
\end{proof}


It seems likely that this theorem can be extended to other known operads governed by a colored operad: Suppose that $\mathcal{P}$ comes from a family of connected simple graphs with substitution. Then, $\mathcal{P}$ is Koszul self-dual and its minimal model is given by the cellular chains on a family of polytopes. 
\begin{proof}[Idea of proof] The bar construction on $\mathcal{P}$ corresponds to the nestings of the underlying graphs. Using the line graphs duality of Proposition \ref{proplinegraph} these can be realized by graph-associahedra. The cellular chains on this family of polytopes then gives us the minimal model $\Omega \mathcal{P}^{\as}$ of $\mathcal{P}$.
\end{proof} 
Some recent work go towards this direction. For instance: 
-constructs in J. Obradovi\'c, P.-L. Curien and J. Ivanovi\'c in \cite{CIO18}.
-minimal model in  J. Obradovi\'c in \cite{Obradovic19} 
-minimal models in  J. Obradovi\'c, M. Markl and M. Batanin in \cite{BMO20}
-and the work of Ward
-V-infinity dioperad
-Pilaud--LA dioperad



